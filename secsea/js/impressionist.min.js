(function(e,t){"use strict";var n={};t.impressionist=function(){return n}})(document,window),function(e,t){"use strict";impressionist().css3===undefined&&(impressionist().css3={}),impressionist().css3.translate=function(e){return" translate3d("+e.x+"px,"+e.y+"px,"+e.z+"px) "},impressionist().css3.rotate=function(e,t){var n=e.order?e.order:"xyz",r="",i=n.split("");t&&(i=i.reverse());for(var s in i)r+=" rotate"+i[s].toUpperCase()+"("+e[i[s]]+"deg)";return r},impressionist().css3.scale=function(e){return" scale("+e+") "},impressionist().css3.perspective=function(e){return" perspective("+e+"px) "},impressionist().css3.css=function(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&(r=n,r!==null&&(e.style[r]=t[n]));return e},impressionist().css3.computeWindowScale=function(e){var n=t.innerHeight/e.height,r=t.innerWidth/e.width,i=n>r?r:n;return e.maxScale&&i>e.maxScale&&(i=e.maxScale),e.minScale&&i<e.minScale&&(i=e.minScale),i}}(document,window),function(e,t){"use strict";var n=[],r=[],i=Math.random();impressionist().gc===undefined&&(impressionist().gc={}),impressionist().gc.pushElement=function(e){n.push(e)},impressionist().gc.appendChild=function(e,t){e.appendChild(t),impressionist().gc.pushElement(t)},impressionist().gc.pushEventListener=function(e,t,n){r.push({target:e,type:t,listener:n})},impressionist().gc.addEventListener=function(e,t,n){e.addEventListener(t,n),impressionist().gc.pushEventListener(e,t,n)},impressionist().gc.removeAll=function(){s();for(var e in n)n[e].parentElement.removeChild(n[e]);n=[];for(var e in r){var t=r[e].target,i=r[e].type,o=r[e].listener;t.removeEventListener(i,o)}};var s=function(){var t="skins/lightgray/skin.min.css",n="skins/lightgray/content.inline.min.css",r=e.head.querySelectorAll("link");for(var i=0;i<r.length;i++){var s=r[i];(s.href.substring(s.href.length-t.length)==t||s.href.substring(s.href.length-n.length)==n)&&impressionist().gc.pushElement(s)}var o=e.querySelectorAll(".mce-content-body");for(var i=0;i<o.length;i++)o[i].classList.remove("mce-content-body"),o[i].classList.remove("mce-edit-focus"),o[i].removeAttribute("contenteditable"),o[i].removeAttribute("spellcheck");var o=e.querySelectorAll("br");for(var i=0;i<o.length;i++)o[i].getAttribute("data-mce-bogus")=="1"&&o[i].parentElement.removeChild(o[i]);var o=e.querySelectorAll(".mce-widget");for(var i=0;i<o.length;i++)o[i].parentElement.removeChild(o[i]);var o=e.querySelectorAll(".mce-container");for(var i=0;i<o.length;i++)o[i].parentElement.removeChild(o[i]);e.body.removeAttribute("spellcheck");var u=e.getElementById("mceDefaultStyles");impressionist().gc.pushElement(u)}}(document,window),function(e,t){"use strict";impressionist().util===undefined&&(impressionist().util={}),impressionist().util.capitalize=function(e){return e[0].toUpperCase()+e.substring(1)},impressionist().util.toNumber=function(e,t){return isNaN(e)?t||0:Number(e)},impressionist().util.toOrder=function(e,t){t=t||"xyz";if(!e)return t;if(e.length>3)return t;for(var n=0;n<e.length;n++){var r=e[n];if("xyz".indexOf(r)<0)return t}return e},impressionist().util.triggerEvent=function(t,n,r){var i=e.createEvent("CustomEvent");i.initCustomEvent(n,!0,!0,r),t.dispatchEvent(i)},impressionist().util.makeDomElement=function(t){var n=e.createElement("div");return n.innerHTML=t,n.firstChild},impressionist().util.loadJavaScript=function(t,n){var r=e.createElement("script");return r.src=t,r.type="text/javascript",r.onreadystatechange=n,r.onload=n,e.head.appendChild(r),r},impressionist().util.loadCss=function(t,n){var r=e.createElement("link");return r.href=t,r.rel="stylesheet",r.type="text/css",r.onreadystatechange=n,r.onload=n,e.head.appendChild(r),r}}(document,window),function(e,t){"use strict";var n,r={};r.camera={rotate:{x:0,y:0,z:0},translate:{x:0,y:0,z:0,order:"xyz"},scale:1},r.step={rotate:{x:0,y:0,z:0},translate:{x:0,y:0,z:0,order:"xyz"},scale:1};var i={},s={},o=["x","y","z","scale","rotateX","rotateY","rotateZ","order"],u,a=impressionist().util,f=impressionist().css3,l=function(e,t,n){var i=[e];E()&&(i=["camera","step"]);for(var s=0;s<i.length;s++)if(t.length==1)r[i[s]].translate[t]=n;else if(t=="scale")r[i[s]].scale=n;else if(t=="order")r[i[s]].rotate.order=n;else{var o=t.substr(-1).toLowerCase();r[i[s]].rotate[o]=n}},c=function(e,t){if(t.length==1)return r[e].translate[t];if(t=="scale")return r[e].scale;if(t=="order")return r[e].rotate.order;var n=t.substr(-1).toLowerCase();return r[e].rotate[n]},h=function(t,n){var i=t||0,s=i/2,o=e.getElementById("impress"),u=o.dataset,l={width:a.toNumber(u.width,1024),height:a.toNumber(u.height,768),maxScale:a.toNumber(u.maxScale,1),minScale:a.toNumber(u.minScale,0),perspective:a.toNumber(u.perspective,1e3)},c=o.firstChild,h={rotate:{x:-r.camera.rotate.x,y:-r.camera.rotate.y,z:-r.camera.rotate.z,order:r.camera.rotate.order},translate:{x:-r.camera.translate.x,y:-r.camera.translate.y,z:-r.camera.translate.z},scale:1/r.camera.scale},p=f.computeWindowScale(l),d=h.scale*p,v=h.scale>=n;f.css(o,{transform:f.perspective(l.perspective/d)+f.scale(d),transitionDuration:i+"ms",transitionDelay:(v?s:0)+"ms"}),f.css(c,{transform:f.rotate(h.rotate,!0)+f.translate(h.translate),transitionDuration:i+"ms",transitionDelay:(v?0:s)+"ms"})},p=function(){u.setAttribute("data-x",r.step.translate.x),u.setAttribute("data-y",r.step.translate.y),u.setAttribute("data-z",r.step.translate.z),u.setAttribute("data-rotate-x",r.step.rotate.x),u.setAttribute("data-rotate-y",r.step.rotate.y),u.setAttribute("data-rotate-z",r.step.rotate.z),u.setAttribute("data-rotate-order",r.step.rotate.order),u.setAttribute("data-scale",r.step.scale),f.css(u,{position:"absolute",transform:"translate(-50%,-50%)"+f.translate(r.step.translate)+f.rotate(r.step.rotate)+f.scale(r.step.scale),transformStyle:"preserve-3d"})},d=function(e,t,n){if(t=="order")return;e[t].input.addEventListener("input",function(e){l(n,t,a.toNumber(e.target.value,t=="scale"?1:0)),h(),p()}),e[t].minus.addEventListener("click",function(e){l(n,t,Math.round(c(n,t)-1)),t=="scale"&&c(n,t)<1&&l(n,t,1),b(),h(),p()}),e[t].plus.addEventListener("click",function(e){l(n,t,Math.round(c(n,t)+1)),b(),h(),p()})},v=function(e,t){var n="order";e[n].input.addEventListener("input",function(e){var r=e.target.value.toString().toLowerCase(),i="";for(var s=0;s<Math.min(r.length,3);s++){if(r[s]!="x"&&r[s]!="y"&&r[s]!="z")continue;i+=r[s]}e.target.value=i,l(t,n,i),h(),p()}),e[n].minus.addEventListener("click",function(e){var r=c(t,n),i="";if(r.length<3){var s="xyz";for(var o=0;o<r.length;o++)s=s.split(r[o]).join("");i=r+s[0]}else i=r[1]+r[2]+r[0];l(t,n,i),b(),h(),p()}),e[n].plus.addEventListener("click",function(e){var r=c(t,n),i="";if(r.length<3){var s="xyz";for(var o=0;o<r.length;o++)s=s.split(r[o]).join("");i=s[0]+r}else i=r[2]+r[0]+r[1];l(t,n,i),b(),h(),p()})},m=function(t,n){t.lock.input.addEventListener("click",function(t){var n=t.target.checked;i.lock.input.checked=n,s.lock.input.checked=n;if(n==1){u=e.querySelector("#impress .step.active");var r=c("camera","scale");y(u),b(),h(1e3,r)}})},g=function(e,t,r){a.triggerEvent(n,"impressionist:toolbar:groupTitle",{group:t,title:a.capitalize(e)}),o.forEach(function(i){var s=i=="rotateX"?"rotate: ":"",o=i.substr(0,6)=="rotate"?i.substr(-1).toLowerCase():i,u=a.makeDomElement("<span>"+s+o+':<input id="impressionist-'+e+"-"+i+'" class="impressionist-'+e+" impressionist-"+e+'-input" type="text" />'+'<button id="impressionist-'+e+"-"+i+'-minus" '+'class="impressionist-'+e+" impressionist-"+e+'-minus">-</button>'+'<button id="impressionist-'+e+"-"+i+'-plus" '+'class="impressionist-'+e+" impressionist-"+e+'-plus">+</button> </span>');a.triggerEvent(n,"impressionist:toolbar:appendChild",{group:t,element:u});var f=u.firstElementChild,l=f.nextSibling,c=l.nextSibling;r[i]={minus:l,input:f,plus:c},d(r,i,e)}),v(r,e);var i=a.makeDomElement('<span class="nocut">lock:<input type="checkbox" id="impressionist-'+e+'-cameracontrols" '+'title="Lock Step coordinates to Camera?" />'+"</span>");a.triggerEvent(n,"impressionist:toolbar:appendChild",{group:t,element:i}),r.lock={input:i.firstElementChild},m(r,e)},y=function(e){var t=e.dataset;r.camera={rotate:{x:a.toNumber(t.rotateX),y:a.toNumber(t.rotateY),z:a.toNumber(t.rotateZ,a.toNumber(t.rotate)),order:a.toOrder(t.rotateOrder)},translate:{x:a.toNumber(t.x),y:a.toNumber(t.y),z:a.toNumber(t.z)},scale:a.toNumber(t.scale,1)},r.step={rotate:{x:a.toNumber(t.rotateX),y:a.toNumber(t.rotateY),z:a.toNumber(t.rotateZ,a.toNumber(t.rotate)),order:a.toOrder(t.rotateOrder)},translate:{x:a.toNumber(t.x),y:a.toNumber(t.y),z:a.toNumber(t.z)},scale:a.toNumber(t.scale,1)}},b=function(){o.forEach(function(e){i[e].input.value=c("camera",e),s[e].input.value=c("step",e)})},w=function(){var t=e.querySelector("#impressionist-toolbar-titles button.selected");return t.innerHTML=="Step"?"step":"camera"},E=function(){return i.lock.input.checked?!0:!1},S=impressionist().gc;S.addEventListener(e,"impressionist:camera:setCoordinates",function(e){var t=e.detail,n=w();o.forEach(function(e){if(t[e]===undefined)return;e=="order"?l(n,e,a.toOrder(t[e],c("camera",e))):l(n,e,a.toNumber(t[e],c("camera",e)))}),b(),h(),p()}),S.addEventListener(e,"impressionist:toolbar:init",function(t){n=t.detail.toolbar,g("camera",1,i),a.triggerEvent(n,"impressionist:camera:init",{widgets:i}),g("step",2,s),a.triggerEvent(n,"impressionist:stepmove:init",{widgets:s}),u=e.querySelector("#impress .step.active"),y(u),b()}),S.addEventListener(e,"impress:stepenter",function(e){u=e.target,y(u),b()}),S.addEventListener(t,"resize",function(){t.setTimeout(function(){y(u),b()},1e3)})}(document,window),function(e,t){"use strict";var n,r={},i={},s={x:!1,y:!1,z:!1},o=impressionist().util,u=impressionist().gc,a=function(e){var t=["x","y","z","rotateX","rotateY","rotateZ"];for(var n in t)e[t[n]]=Math.round(e[t[n]]);return e},f=function(){var t=e.querySelector("#impressionist-toolbar-titles button.selected");return t.innerHTML.toLowerCase()=="step"?"step":"camera"},l=function(){var e=f();return e?r[e].order.input.value:r.camera.order.input.value},c=function(){i.xy=o.makeDomElement('<button id="impressionist-cameracontrols-xy" title="Pan camera left-right, up-down">+</button>'),i.z=o.makeDomElement('<button id="impressionist-cameracontrols-z" title="Zoom in-out = up-down, rotate = left-right">Z</button>'),i.rotateXY=o.makeDomElement('<button id="impressionist-cameracontrols-rotate" title="Rotate camera left-right, up-down">O</button>'),n=o.makeDomElement('<div id="impressionist-cameracontrols"></div>'),n.appendChild(i.xy),n.appendChild(i.z),n.appendChild(i.rotateXY),u.appendChild(e.body,n);var t=function(e){var t={};return t.start={},t.start.x=e.clientX,t.start.y=e.clientY,t.current={},t.current.x=e.clientX,t.current.y=e.clientY,t},s=function(){i.xy.drag=!1,i.z.drag=!1,i.rotateXY.drag=!1};i.xy.addEventListener("mousedown",function(e){i.xy.drag=t(e),c()}),i.z.addEventListener("mousedown",function(e){i.z.drag=t(e),c()}),i.rotateXY.addEventListener("mousedown",function(e){i.rotateXY.drag=t(e),c()}),u.addEventListener(e,"mouseup",function(e){s()}),u.addEventListener(e,"mouseleave",function(e){s()}),u.addEventListener(e,"mousemove",function(e){i.xy.drag&&(i.xy.drag.current.x=e.clientX,i.xy.drag.current.y=e.clientY),i.z.drag&&(i.z.drag.current.x=e.clientX,i.z.drag.current.y=e.clientY),i.rotateXY.drag&&(i.rotateXY.drag.current.x=e.clientX,i.rotateXY.drag.current.y=e.clientY)});var c=function(){var t=r[f()],n={x:0,y:0,z:0,rotateX:0,rotateY:0,rotateZ:0};n.order=l();var s=!1;i.xy.drag&&(n.x=i.xy.drag.current.x-i.xy.drag.start.x,n.y=i.xy.drag.current.y-i.xy.drag.start.y,s=!0),i.z.drag&&(n.z=i.z.drag.current.y-i.z.drag.start.y,n.rotateZ=i.z.drag.current.x-i.z.drag.start.x,s=!0),i.rotateXY.drag&&(n.rotateX=i.rotateXY.drag.current.y-i.rotateXY.drag.start.y,n.rotateY=i.rotateXY.drag.current.x-i.rotateXY.drag.start.x,s=!0);if(s){n=h(n),n=p(n);var u={},d=o.toNumber(t.scale.input.value,1);u.x=Number(t.x.input.value)+n.x*d,u.y=Number(t.y.input.value)+n.y*d,u.z=Number(t.z.input.value)+n.z*d,u.scale=d+o.toNumber(n.scale),u.rotateX=Number(t.rotateX.input.value)-n.rotateX/10,u.rotateY=Number(t.rotateY.input.value)+n.rotateY/10,u.rotateZ=Number(t.rotateZ.input.value)-n.rotateZ/10,u.order=n.order,u=a(u),o.triggerEvent(e,"impressionist:camera:setCoordinates",u),setTimeout(c,100)}},h=function(e){for(var t in e){if(t=="order")continue;e[t]=Math.abs(e[t])>5?e[t]:0}return i.z.drag&&i.z.drag.setzero?e[i.z.drag.setzero]=0:Math.abs(e.z)>Math.abs(e.rotateZ)?(e.rotateZ=0,i.z.drag.setzero="rotateZ"):Math.abs(e.z)<Math.abs(e.rotateZ)&&(e.z=0,i.z.drag.setzero="z"),i.rotateXY.drag&&i.rotateXY.drag.setzero?e[i.rotateXY.drag.setzero]=0:Math.abs(e.rotateX)>Math.abs(e.rotateY)?(e.rotateY=0,i.rotateXY.drag.setzero="rotateY"):Math.abs(e.rotateX)<Math.abs(e.rotateY)&&(e.rotateX=0,i.rotateXY.drag.setzero="rotateX"),e}},h=function(){s={x:!1,y:!1,z:!1}};u.addEventListener(e,"impress:stepenter",function(e){h()}),u.addEventListener(e,"impressionist:camera:init",function(e){r.camera=e.detail.widgets,r.camera.order.input.addEventListener("input",function(e){h()}),r.camera.order.plus.addEventListener("click",function(e){h()}),r.camera.order.minus.addEventListener("click",function(e){h()}),c(),impressionist().util.triggerEvent(n,"impressionist:cameracontrols:init")}),u.addEventListener(e,"impressionist:stepmove:init",function(e){r.step=e.detail.widgets,r.step.order.input.addEventListener("input",function(e){h()}),r.step.order.plus.addEventListener("click",function(e){h()}),r.step.order.minus.addEventListener("click",function(e){h()})});var p=function(e){var t=function(e){return e*(180/Math.PI)},n=function(e){return e*(Math.PI/180)},i={},u=e.order,a=r.camera,l={x:o.toNumber(a.rotateX.input.value),y:o.toNumber(a.rotateY.input.value),z:o.toNumber(a.rotateZ.input.value)},c={x:function(e,t){var r=[];return r[0]=t[0],r[1]=t[1]*Math.cos(n(e))-t[2]*Math.sin(n(e)),r[2]=t[2]*Math.cos(n(e))+t[1]*Math.sin(n(e)),r},y:function(e,t){var r=[];return r[0]=t[0]*Math.cos(n(e))+t[2]*Math.sin(n(e)),r[1]=t[1],r[2]=t[2]*Math.cos(n(e))-t[0]*Math.sin(n(e)),r},z:function(e,t){var r=[];return r[0]=t[0]*Math.cos(n(e))-t[1]*Math.sin(n(e)),r[1]=t[1]*Math.cos(n(e))+t[0]*Math.sin(n(e)),r[2]=t[2],r}},h=[e.x,e.y,e.z];for(var p=u.length-1;p>=0;p--)h=c[u[p]](l[u[p]],h);i.x=h[0],i.y=h[1],i.z=h[2];var d=r[f()],v={};for(var p=0;p<u.length;p++){var m="rotate"+u[p].toUpperCase();v[u[p]]=o.toNumber(d[m].input.value)}var g="";return e.rotateX&&(g="x"),e.rotateY&&(g="y"),e.rotateZ&&(g="z"),Math.abs(v[g])<1&&!s[g]&&(i.order=e.order.split(g).join("")+g),s[g]=!0,i.rotateX=e.rotateX,i.rotateY=e.rotateY,i.rotateZ=e.rotateZ,i.scale=e.scale,i}}(document,window),function(e,t){"use strict";if(t.require){var n=function(t,n){impressionist().gc.removeAll(),impress().tear(),i(),r.send("impressionist-return-documentElement",{filename:n,documentElement:e.documentElement.outerHTML}),impress().init();var s=impressionist().util.loadJavaScript(process.resourcesPath+"/../../../../js/impressionist.js",function(){impressionist().gc.pushElement(s),impressionist().util.triggerEvent(e,"impressionist:init",{})})},r=require("electron").ipcRenderer;r.once("impressionist-get-documentElement",n)}var i=function(){for(;;){var t=e.body.lastChild;if(t.nodeType!=3)break;t=t.nodeValue;if(t.slice(-3)!="\n\n\n")break;e.body.lastChild.nodeValue=t.slice(0,-1)}}}(document,window),function(e,t){"use strict";var n=impressionist().util.loadCss(process.resourcesPath+"/../../../../css/impressionist.css");impressionist().gc.pushElement(n)}(document,window),function(e,t){"use strict";var n,r,i,s=[],o,u=!1,a=null,f=null,l=[],c=0,h={},p={},d=[["x","data-x"],["y","data-y"],["z","data-z"],["scale","data-scale"],["rotateX","data-rotate-x"],["rotateY","data-rotate-y"],["rotateZ","data-rotate-z"],["order","data-rotate-order"]],v=impressionist().util,m=function(){v.triggerEvent(i,"impressionist:toolbar:groupTitle",{group:c,title:"Outline"});var e=v.makeDomElement('<button id="impressionist-stepedit-new" title="New step">&#x2b1c;</button>');v.triggerEvent(i,"impressionist:toolbar:appendChild",{group:c,element:e}),h["new"]=e,e.addEventListener("click",function(e){u||T()});var t=v.makeDomElement('<button id="impressionist-stepedit-delete" title="Delete step">X</button>');v.triggerEvent(i,"impressionist:toolbar:appendChild",{group:c,element:t}),h["delete"]=t,t.addEventListener("click",function(e){u||N()});var n=v.makeDomElement('<span class="impressionist-toolbar-space"> </span>');v.triggerEvent(i,"impressionist:toolbar:appendChild",{group:c,element:n});var r=v.makeDomElement('<button id="impressionist-stepedit-reorder" title="Reorder steps">&#x2195;</button>');v.triggerEvent(i,"impressionist:toolbar:appendChild",{group:c,element:r}),h.reorder=r,r.addEventListener("click",function(e){a?k():C()})},g=function(e,t){e===undefined&&(o?e=o.id:e=1),u=!0,t?impress().goto(e):impress().goto(e,1)},y=function(e){var t=b(e);return t==0?undefined:s[t]},b=function(e){for(var t=0;t<s.length;t++)if(s[t]==e)return t==s.length-1?0:t+1},w=function(e){var t=E(e);return t==-1?undefined:s[t]},E=function(e){for(var t=s.length;t>=0;t--)if(s[t]==e)return t-1},S=function(){var e=0,t=/step-(\d+)/;s.forEach(function(n){var r=n.id.match(t);if(r){var i=parseInt(r[1]);i>e&&(e=i)}});var n=e+1;return"step-"+n},x=function(e){var t=b(o)+1;return"<p>Step "+t+" of "+e+"</p>"},T=function(){var t=e.createElement("DIV");for(var n=0;n<o.attributes.length;n++){var i=o.attributes[n].name;t.setAttribute(i,o.getAttribute(i))}d.forEach(function(e){t.setAttribute(e[1],p[e[0]].input.value)}),t.id=S(),t.innerHTML=x(s.length+1);var u=y(o);u?r.insertBefore(t,u):r.appendChild(t),g(t.id),v.triggerEvent(t,"impressionist:stepedit:newStep",{})},N=function(){if(s.length==1){o.innerHTML=x(s.length);return}var e=b(o)-1;o.parentElement.removeChild(o),e>=0?g(e,!0):g(s.length-2,!0)},C=function(){l=[];var t=s.length<16?s.length:16;a=v.makeDomElement('<div id="impressionist-stepedit-reorder-dialog">\n  <p><strong>Reorder steps</strong></p>\n  <table>\n    <tr><td>\n      <select id="impressionist-stepedit-reorder-select" multiple="true" size="'+t+'">\n'+"      </select>\n"+"    </td><td>\n"+"      <button>^</button><br />\n"+"      <button>v</button>\n"+"    </td></tr>\n"+"  </table>\n"+"</div>"),f=a.querySelector("#impressionist-stepedit-reorder-select"),O();var n=a.querySelectorAll("button"),r=n[0],i=n[1];r.addEventListener("click",function(t){A();for(var n=0;n<f.selectedOptions.length;n++){var r=f.selectedOptions[n].value,i=e.getElementById(r),s=M(i);if(s===!1)break}g()}),i.addEventListener("click",function(t){A();for(var n=f.selectedOptions.length-1;n>=0;n--){var r=f.selectedOptions[n].value,i=e.getElementById(r),s=_(i);if(s===!1)break}g()}),e.body.appendChild(a)},k=function(){a.parentElement.removeChild(a),a=null},L=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<f.options.length;t++)e.indexOf(f.options[t].value)!=-1&&(f.options[t].selected=!0)},A=function(){l=[];for(var e=0;e<f.selectedOptions.length;e++)l.push(f.selectedOptions[e].value)},O=function(){if(f){var e="";for(var t=0;t<s.length;t++){var n=s[t];e+='<option value="'+n.id+'">'+n.id+"</option>\n"}f.innerHTML=e,L(l)}},M=function(e){var t=e.parentElement,r=w(e);if(!r)return!1;t.insertBefore(e,r),s=n.querySelectorAll(".step")},_=function(e){var t=e.parentElement,r=y(e);if(!r)return!1;r=r.nextSibling,r?t.insertBefore(e,r):t.appendChild(e),s=n.querySelectorAll(".step")},D=impressionist().gc;D.addEventListener(e,"impressionist:init",function(t){n=e.getElementById("impress"),r=n.firstChild,s=n.querySelectorAll(".step"),o=n.querySelector(".step.active")}),D.addEventListener(e,"impressionist:toolbar:init",function(e){i=e.target,m(),v.triggerEvent(i,"impressionist:stepedit:init",{widgets:h})}),D.addEventListener(e,"impressionist:camera:init",function(e){p=e.detail.widgets}),D.addEventListener(e,"impress:steprefresh",function(e){s=n.querySelectorAll(".step"),O(),o=n.querySelector(".step.active"),u=!1})}(document,window),function(e,t){"use strict";var n,r,i=impressionist().gc,s=!1,o=function(t){u(t.target.targetElm),s||(s=!0,impressionist().util.triggerEvent(e,"impressionist:tinymce:init",{script:r,toolbar:n}))},u=function(e){i.addEventListener(e,"keydown",function(e){e.stopPropagation()}),i.addEventListener(e,"keyup",function(e){e.stopPropagation()})},a={setup:function(e){e.on("init",o)},inline:!0,theme:"modern",width:780,height:550,menubar:!1,statusbar:!1,fixed_toolbar_container:"#tinymce-toolbar",toolbar:"styleselect fontselect fontsizeselect forecolor | cut copy paste | undo redo | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image table code",fontsize_formats:"8pt 12pt 16pt 20pt 24pt 30pt 36pt 48pt 72pt 96pt",plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"]},f=function(){var e=Object.assign({},a);e.selector=".step",t.tinymce.init(e)};i.addEventListener(e,"impressionist:init",function(t){var s='<div id="tinymce-toolbar"></div>';n=impressionist().util.makeDomElement(s),i.appendChild(e.body,n),r=impressionist().util.loadJavaScript(process.resourcesPath+"/../../../tinymce/tinymce.js",f),impressionist().gc.pushElement(r)}),i.addEventListener(e,"impressionist:stepedit:newStep",function(e){var n=Object.assign({},a);n.target=e.target,t.tinymce.init(n)})}(document,window),function(e,t){"use strict";var n=e.createElement("DIV");n.id="impressionist-toolbar";var r=[],i=e.createElement("DIV");i.id="impressionist-toolbar-titles",n.appendChild(i);var s=[],o=e.createElement("DIV");o.id="impressionist-toolbar-groups",n.appendChild(o);var u=impressionist().gc,a=function(t){var n="impressionist-toolbar-group-"+t;if(!s[t]){s[t]=e.createElement("span"),s[t].id=n,r.length>0&&l!=t&&(s[t].style.display="none");var i=f(t);i===undefined?o.appendChild(s[t]):o.insertBefore(s[t],s[i])}return s[t]},f=function(e){var t=e+1;while(!s[t]&&t<s.length)t++;if(t<s.length)return t},l=0,c=function(e){return function(t){l!==undefined&&(s[l].style.display="none",o.classList.remove("selected-group-"+l),r[l]&&r[l].classList.remove("selected")),e!=l?(o.style.display="block",s[e].style.display="inline",r[e]&&r[e].classList.add("selected"),o.classList.add("selected-group-"+e),l=e):(o.style.display="none",l=undefined)}};n.addEventListener("impressionist:toolbar:groupTitle",function(t){var n=t.detail.group,s=r[n]===undefined;if(s){var o=f(n);r[n]=e.createElement("button"),r[n].id="impressionist-toolbar-group-"+n+"-title",o===undefined?i.appendChild(r[n]):i.insertBefore(r[n],r[o]),r[n].addEventListener("click",c(n)),n==0&&!l&&r[0].classList.add("selected")}r[n].innerHTML=t.detail.title}),n.addEventListener("impressionist:toolbar:appendChild",function(e){var t=e.detail.group,n=a(t);n.appendChild(e.detail.element),t==0&&!l&&o.classList.add("selected-group-0")}),n.addEventListener("impressionist:toolbar:insertBefore",function(e){n.insertBefore(e.detail.element,e.detail.before)}),n.addEventListener("impressionist:toolbar:removeWidget",function(e){n.removeChild(e.detail.remove)}),u.addEventListener(e,"impressionist:tinymce:init",function(t){u.appendChild(e.body,n),impressionist().util.triggerEvent(n,"impressionist:toolbar:init",{toolbar:n})})}(document,window)